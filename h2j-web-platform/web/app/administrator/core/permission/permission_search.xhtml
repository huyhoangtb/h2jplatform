<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h2j="http://xmlns.jcp.org/jsf/composite/h2j">



    <h:form prependId="false" id="searchFormId">
        <p:messages  id="messagesId"/>
        <p:outputPanel id="searchPanelId">

            <h2j:searchBox header="Tìm kiếm quyền truy cập hệ thống" id="searchboxId" maxWidth="80">


                <div class="UIFloatLeft UIMarginRight10px UIDivLabel">
                    <h:outputLabel value="#{msg['permission_code']}"/>
                </div>
                <div class="UIFloatLeft UIMarginRight10px ">
                    <p:inputText   value="#{permisionController.searchData.permissionCode}"/>
                </div>

                <div class="UIFloatLeft UIMarginRight10px UIDivLabel">
                    <h:outputLabel value="#{msg['permission_name']}"/>
                </div>
                <div class="UIFloatLeft UIMarginRight10px ">
                    <p:inputText  value="#{permisionController.searchData.permissionName}"/>
                </div>

                <div class="UIDivLabel UIFloatLeft UIMarginLeft10px " style="width: 80px">
                    <h:outputText value="#{msg['status']}"/>
                </div>
                <div class=" UIFloatLeft UIMarginRight10px">
                    <p:selectOneMenu style="width: 130px" value="#{permisionController.searchData.status}" converter="javax.faces.Integer">
                        <f:selectItem itemLabel="#{msg['select_status']}" itemValue="-1"/>
                        <f:selectItems value="#{permisionController.permissionStatusList}"/>
                    </p:selectOneMenu>
                </div>


                <div class="UIFloatLeft UIMarginRight10px ">
                    <p:commandButton  value="#{msg['label_search']}" ajax="false" actionListener ="#{permisionController.searchPermission}" update="permissionListId"/>
                </div>
                <div class="UIFloatLeft UIMarginRight10px ">
                    <p:commandButton value="#{msg['label_create_new']}" action="edit_permission_admin"  ajax="false"/>
                </div>
                <div class="UIClearLeft"><span></span></div>
            </h2j:searchBox>

        </p:outputPanel>

        <div class=" UITableControl">
            <p:contextMenu for="permissionListId">  
                <p:menuitem value="#{msg['label_detail']}" icon="ui-icon-pencil" 
                            actionListener="#{permisionController.viewDetailPermission}" 
                            oncomplete="permissionDigVar.show()" ajax="true">

                </p:menuitem>  
                <p:menuitem value="#{msg['label_active']}" icon="ui-icon-unlocked" 
                            actionListener="#{permisionController.activePermission}" update="messagesId permissionListId">
                </p:menuitem>  
                <p:menuitem value="#{msg['label_inactive']}" icon="ui-icon-locked" 
                            actionListener="#{permisionController.inactivePermission}" update="messagesId permissionListId">
                </p:menuitem>  
                <p:menuitem value="#{msg['label_destroy']}" icon="ui-icon-trash" 
                            actionListener="#{permisionController.distroyPermission}" 
                            update="messagesId permissionListId">
                </p:menuitem>  

            </p:contextMenu>  

            <p:dataTable  id="permissionListId" var="permissionData" value="#{permisionController.permissionLazyDataModel}" paginator="true" rows="10"  
                          paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"  
                          rowsPerPageTemplate="5,10,15" selectionMode="single" selection="#{permisionController.permission}"  lazy="true"
                          emptyMessage="Danh sách quyền truy cập rỗng!" draggableColumns="true" paginatorPosition="bottom"
                          styleClass="UITable UIMarginTop10px">  


                <p:column headerText="#{msg['permission_code']}" sortBy="#{permissionData.permissionCode}" width="15%">  
                    <h:outputText value="#{permissionData.permissionCode}" />  
                </p:column> 
                <p:column headerText="#{msg['permission_name']}" sortBy="#{permissionData.permissionName}" width="25%">  
                    <h:outputText value="#{permissionData.permissionName}" />
                </p:column> 
                <p:column headerText="#{msg['type']}" width="10%">  
                    <h:outputText value="#{permissionData.typeName}" />  
                </p:column> 
                <p:column headerText="#{msg['status']}" width="10%">  
                    <h:outputText value="#{permissionData.statusName}" />  
                </p:column> 

                <p:column headerText="#{msg['description']}" width="40%">  
                    <h:outputText escape="false" value="#{permissionData.shortComments}" title="#{permissionData.comments}"
                                 />  
                </p:column> 
                <p:column headerText="Chi tiết" width="8%" styleClass="UITextCenter">  
                    <h:link  outcome="edit_permission_admin" styleClass="UIViewLink" >
                        <f:param name="perId" value="#{permissionData.permissionId}" />
                    </h:link>
                </p:column> 
            </p:dataTable>
            <div class="UIClearRight"><span></span></div>
        </div>
    </h:form>
</ui:composition>